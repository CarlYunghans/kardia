$Version=2$
prefs "widget/component-decl"
    {
    width=498; height=475;

    page "widget/parameter" { type=object; find_container="widget/page"; }

    prefs_vbox "widget/vbox"
	{
	x=8;y=8;width=482;height=410;
	spacing=8;
	cellsize=20;

	pg_pane "widget/pane"
	    {
	    height=26; width=482;
	    widget_class="label";
	    border_color = "#153f5f";

	    pg_lbl "widget/label"
		{
		x=4;y=0;width=480;height=24;
		font_size = 13;
		widget_class="label";
		align=left;
		text = "i18n:Appearance";
		}
	    }

	pg_osrc "widget/osrc"
	    {
	    autoquery=onload;
	    replicasize=2;
	    readahead=1;
	    sql = runserver("select :font_size, :font_name, :show_diagnostics, :locale from /apps/kardia/tpl/" + user_name() + ".tpl where :name = 'page'");

	    pg_form "widget/form"
		{
		// Must state these explicitly since user can turn off modification!
		allow_modify = yes;
		allow_new = no;
		allow_query = no;
		allow_delete = no;

		f_fontname "widget/component" { x=30; width=350; text="i18n:Font:"; path="/sys/cmp/smart_field.cmp"; ctl_type=dropdown; field=font_name; sql="select :font, :font from /apps/kardia/data/Fonts.csv/rows"; label_width=140; }
		f_fontsize "widget/component" { x=30; width=350; text="i18n:Text Size:"; path="/sys/cmp/smart_field.cmp"; ctl_type=dropdown; field=font_size; sql="select :descrip, :fontsize from /apps/kardia/data/FontSizes.csv/rows"; label_width=140; }
		f_locale "widget/component" { x=30; width=350; text="i18n:Locale:"; path="/sys/cmp/smart_field.cmp"; ctl_type=dropdown; field=locale; sql="select :name, :name from /apps/kardia/locales"; label_width=140; }
		f_showdiag "widget/component" { x=30; width=350; text="i18n:Show Diagnostics:"; path="/sys/cmp/smart_field.cmp"; ctl_type=checkbox; field=show_diagnostics; label_width=140; }
		}
	    }

	tb_osrc "widget/osrc"
	    {
	    autoquery=onload;
	    replicasize=2;
	    readahead=1;
	    sql = runserver("select :rowheight from /apps/kardia/tpl/" + user_name() + ".tpl where :name = 'table'");

	    tb_form "widget/form"
		{
		// Must state these explicitly since user can turn off modification!
		allow_modify = yes;
		allow_new = no;
		allow_query = no;
		allow_delete = no;

		f_rowheight "widget/component" { x=30; width=350; text="i18n:Table Row Height:"; path="/sys/cmp/smart_field.cmp"; ctl_type=dropdown; 
field=rowheight; sql="select :descrip, :height from /apps/kardia/data/TableRowHeights.csv/rows"; label_width=140; }
		}
	    }

	spa2 "widget/autolayoutspacer" { height=16; }
	fm_pane "widget/pane"
	    {
	    height=26; width=482;
	    widget_class="label";
	    border_color = "#153f5f";

	    fm_lbl "widget/label"
		{
		x=4;y=0;width=480;height=24;
		font_size = 13;
		widget_class="label";
		align=left;
		text = "i18n:Data Entry";
		}
	    }

	fm_osrc "widget/osrc"
	    {
	    autoquery=onload;
	    replicasize=2;
	    readahead=1;
	    sql = runserver("select :enter_mode, :allow_delete, :allow_modify, :allow_new, :confirm_delete from /apps/kardia/tpl/" + user_name() + ".tpl where :name = 'form'");

	    fm_form "widget/form"
		{
		// Must state these explicitly since user can turn off modification!
		allow_modify = yes;
		allow_new = no;
		allow_query = no;
		allow_delete = no;

		f_entermode "widget/component" { x=30; width=350; text="i18n:[ENTER] Key:"; path="/sys/cmp/smart_field.cmp"; ctl_type=dropdown; field=enter_mode; sql="select :descrip, :mode from /apps/kardia/data/EnterModes.csv/rows"; label_width=140; }
		f_confirmdel "widget/component" { x=30; width=350; text="i18n:Confirm Deletes:"; path="/sys/cmp/smart_field.cmp"; ctl_type=checkbox; field=confirm_delete; label_width=140; }
		f_allowmod "widget/component" { x=30; width=350; text="i18n:Allow Changes:"; path="/sys/cmp/smart_field.cmp"; ctl_type=checkbox; field=allow_modify; label_width=140; }
		}
	    }
	}

    prefctl_vbox "widget/vbox"
	{
	x=8;y=408;width=482;height=59;
	spacing=8;

	restart_lbl "widget/label" { height=14; font_size=10; text="i18n:These settings will take effect the next time you log in."; }
	sep3 "widget/pane" { height=2; style=lowered; }
	prefctl_hbox "widget/hbox"
	    {
	    height=24;
	    cellsize=100;
	    spacing=8;

	    apply_btn "widget/textbutton"
		{
		enabled = runclient(:pg_form:is_savable or :tb_form:is_savable or :fm_form:is_savable);
		text = "i18n:Save";
		apply_cn1 "widget/connector" { event=Click; target=pg_form; action=Save; }
		apply_cn2 "widget/connector" { event=Click; target=tb_form; action=Save; }
		apply_cn3 "widget/connector" { event=Click; target=fm_form; action=Save; }
		}

	    reset_btn "widget/textbutton"
		{
		enabled = runclient(:pg_form:is_savable or :tb_form:is_savable or :fm_form:is_savable);
		text = "i18n:Reset";
		reset_cn1 "widget/connector" { event=Click; target=pg_form; action=Discard; }
		reset_cn2 "widget/connector" { event=Click; target=tb_form; action=Discard; }
		reset_cn3 "widget/connector" { event=Click; target=fm_form; action=Discard; }
		}

	    close_btn "widget/textbutton"
		{
		text = "i18n:Close";

		close_cn "widget/connector" { target=page; event=Click; action=Close; }
		}
	    }
	}
    }
